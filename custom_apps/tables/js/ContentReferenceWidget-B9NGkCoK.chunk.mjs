const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=[window.OC.filePath('tables', '', 'js/CreateRow-DfVettoA.chunk.mjs'),window.OC.filePath('tables', '', 'js/preload-helper-DI1sXkNj.chunk.mjs'),window.OC.filePath('tables', '', 'js/useFormatDateTime-AjHnUuIE.chunk.mjs'),window.OC.filePath('tables', '', 'js/NcNoteCard-DG3F-LUj.chunk.mjs'),window.OC.filePath('tables', '', 'js/vue.runtime.esm-DBajT-mq.chunk.mjs'),window.OC.filePath('tables', '', 'js/index-BmkWHhSR.chunk.mjs'),window.OC.filePath('tables', '', 'js/public-0fz1q1qH.chunk.mjs'),window.OC.filePath('tables', '', 'js/_plugin-vue2_normalizer-oRdohoZe.chunk.mjs'),window.OC.filePath('tables', '', 'js/index-56SXuvlv-Ca_OzF4R.chunk.mjs'),window.OC.filePath('tables', '', 'js/_plugin-vue2_normalizer-jrlE7CJU-B-cIoeGj.chunk.mjs'),window.OC.filePath('tables', '', 'js/rowHelper-CqVeo9j1.chunk.mjs'),window.OC.filePath('tables', '', 'js/RowFormWrapper-CzNjoOJe.chunk.mjs'),window.OC.filePath('tables', '', 'js/NcTable-BKzW_OCJ.chunk.mjs'),window.OC.filePath('tables', '', 'js/data-BYdwMvxA.chunk.mjs'),window.OC.filePath('tables', '', 'js/constants-C1shV9FP.chunk.mjs'),window.OC.filePath('tables', '', 'js/Link-BMMtnqd-.chunk.mjs'),window.OC.filePath('tables', '', 'js/store-Cvxj8Vav.chunk.mjs'),window.OC.filePath('tables', '', 'js/EditRow-BZyCEFi8.chunk.mjs')])))=>i.map(i=>d[i]);
/*! third party licenses: js/vendor.LICENSE.txt */
import{_ as o}from"./preload-helper-DI1sXkNj.chunk.mjs";import{p as l,O as h,a as m}from"./NcTable-BKzW_OCJ.chunk.mjs";import"./useFormatDateTime-AjHnUuIE.chunk.mjs";import{k as d,j as w}from"./NcNoteCard-DG3F-LUj.chunk.mjs";import{n as p}from"./_plugin-vue2_normalizer-oRdohoZe.chunk.mjs";import"./index-BmkWHhSR.chunk.mjs";import"./index-56SXuvlv-Ca_OzF4R.chunk.mjs";import{s as a}from"./index-Da8lzF0Y.chunk.mjs";import{useTablesStore as u}from"./store-Cvxj8Vav.chunk.mjs";import{u as r}from"./data-BYdwMvxA.chunk.mjs";import{m as b}from"./constants-C1shV9FP.chunk.mjs";import"./vue.runtime.esm-DBajT-mq.chunk.mjs";import"./Link-BMMtnqd-.chunk.mjs";import"./public-0fz1q1qH.chunk.mjs";import"./_plugin-vue2_normalizer-jrlE7CJU-B-cIoeGj.chunk.mjs";const f={components:{NcTable:m,Options:h,NcLoadingIcon:d},mixins:[l],props:{richObjectType:{type:String,default:""},richObject:{type:Object,default:null},accessible:{type:Boolean,default:!0}},data(){return{searchExp:null,rows:null,tablesStore:u(),dataStore:r()}},computed:{tablePermissions(){return{canCreateRows:this.canCreateRowInElement(this.richObject),canReadRows:!0,canEditRows:this.canUpdateData(this.richObject),canDeleteRows:this.canDeleteData(this.richObject),canCreateColumns:!1,canEditColumns:!1,canDeleteColumns:!1,canDeleteTable:!1,canSelectRows:!1,canHideColumns:!1,canFilter:!1,showActions:this.canManageElement(this.richObject)}},filteredRows(){return this.searchExp?this.rows.filter(t=>t.data.some(e=>String(e.value).search(this.searchExp)>=0)):this.rows}},async mounted(){w(this.$el,t=>{const e=t[0],{width:s}=e.contentRect;this.$el.style.setProperty("--widget-content-width",`${s}px`)}),await this.loadRows()},methods:{...b(r,["loadRowsFromBE","getRows"]),search(t){this.searchExp=t!==""?new RegExp(t.trim(),"ig"):null},async createRow(){const{default:t}=await o(async()=>{const{default:e}=await import("./CreateRow-DfVettoA.chunk.mjs");return{default:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url);a(t,{showModal:!0,columns:this.richObject.columns,isView:!!this.richObject.type,elementId:this.richObject.id},()=>{const e=this.getRows;if(e.length>this.rows.length){const s=e.at(-1);this.rows.push(s)}})},async editRow(t){const{default:e}=await o(async()=>{const{default:s}=await import("./EditRow-BZyCEFi8.chunk.mjs");return{default:s}},__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),import.meta.url);a(e,{showModal:!0,columns:this.richObject.columns,row:this.getRow(t),isView:!!this.richObject.type,element:this.richObject},()=>{const s=this.getRows,c=this.rows.findIndex(i=>i.id===t),n=s.find(i=>i.id===t);this.rows.splice(c,1,n)})},getRow(t){return this.rows.find(e=>e.id===t)},async loadRows(){await this.loadRowsFromBE({tableId:this.richObject.id})&&(this.rows=this.getRows)}}};var R=function(){var t=this,e=t._self._c;return t.richObject?e("div",{staticClass:"tables-content-widget"},[e("div",{staticClass:"header"},[e("h2",[t.rows?e("span",[t._v(t._s(t.richObject.emoji))]):e("NcLoadingIcon",{attrs:{size:30}}),t._v("Â "+t._s(t.richObject.title)+" ")],1),e("Options",{attrs:{config:t.tablePermissions,"show-options":!0},on:{"create-row":t.createRow,"set-search-string":t.search}})],1),t.rows?e("div",{staticClass:"nc-table"},[e("NcTable",t._b({attrs:{rows:t.filteredRows,columns:t.richObject.columns},on:{"edit-row":t.editRow}},"NcTable",t.tablePermissions,!1))],1):t._e()]):t._e()},O=[],j=p(f,R,O,!1,null,"c2059f72");const V=j.exports;export{V as default};
//# sourceMappingURL=ContentReferenceWidget-B9NGkCoK.chunk.mjs.map
