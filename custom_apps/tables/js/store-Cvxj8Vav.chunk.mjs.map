{"version":3,"file":"store-Cvxj8Vav.chunk.mjs","sources":["../src/store/store.js"],"sourcesContent":["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\nimport { defineStore } from 'pinia'\nimport axios from '@nextcloud/axios'\nimport { generateUrl, generateOcsUrl } from '@nextcloud/router'\nimport { showError } from '@nextcloud/dialogs'\nimport displayError from '../shared/utils/displayError.js'\nimport { NODE_TYPE_TABLE, NODE_TYPE_VIEW } from '../shared/constants.ts'\nimport { getCurrentUser } from '@nextcloud/auth'\nimport { set } from 'vue'\n\nexport const useTablesStore = defineStore('store', {\n\tstate: () => ({\n\t\tloading: {\n\t\t\ttables: true,\n\t\t\tviewsShared: true,\n\t\t\tcontexts: true,\n\t\t},\n\t\ttables: [],\n\t\tviews: [],\n\t\ttemplates: [],\n\t\tcontexts: [],\n\t\tactiveViewId: null,\n\t\tactiveTableId: null,\n\t\tactiveRowId: null,\n\t\tactiveElementIsView: false,\n\t\tactiveContextId: null,\n\t\tappNavCollapsed: false,\n\t}),\n\n\tgetters: {\n\t\tgetTable: (state) => (id) => {\n\t\t\treturn state.tables.find(table => table.id === id)\n\t\t},\n\t\tgetContext: (state) => (id) => {\n\t\t\treturn state.contexts.find(context => context.id === id)\n\t\t},\n\t\tgetView: (state) => (id) => {\n\t\t\treturn state.views.find(view => view.id === id)\n\t\t},\n\t\tactiveView: (state) => {\n\t\t\tif (state.views && state.activeViewId) {\n\t\t\t\treturn state.views.find(item => item.id === state.activeViewId)\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\tactiveTable: (state) => {\n\t\t\tif (state.tables && state.activeTableId) {\n\t\t\t\treturn state.tables.find(item => item.id === state.activeTableId)\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\tactiveElement(state) {\n\t\t\tif (state.activeTableId && state.tables) {\n\t\t\t\treturn state.tables.find(item => item.id === state.activeTableId)\n\t\t\t} else if (state.views && state.activeViewId) {\n\t\t\t\treturn state.views.find(item => item.id === state.activeViewId)\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\t\tactiveContext: (state) => {\n\t\t\tif (state.contexts && state.activeContextId) {\n\t\t\t\treturn state.contexts.find(item => item.id === state.activeContextId)\n\t\t\t}\n\t\t\treturn null\n\t\t},\n\n\t\tisView: (state) => state.activeElementIsView,\n\n\t\tisLoading: (state) => (key) => state.loading[key] ?? false,\n\n\t\tisLoadingSomething: (state) => Object.keys(state.loading).filter(key => state.loading[key]).length > 0,\n\t},\n\n\tactions: {\n\t\tsetAppNavCollapsed(value) {\n\t\t\tthis.appNavCollapsed = !!value\n\t\t},\n\n\t\tsetLoading({ key, value }) {\n\t\t\tthis.loading[key] = !!value\n\t\t},\n\n\t\tsetActiveViewId(viewId) {\n\t\t\tif (this.activeViewId !== viewId) {\n\t\t\t\tthis.activeViewId = viewId\n\t\t\t\tthis.activeTableId = null\n\t\t\t\tthis.activeElementIsView = true\n\t\t\t}\n\t\t},\n\n\t\tsetActiveTableId(tableId) {\n\t\t\tif (this.activeTableId !== tableId) {\n\t\t\t\tthis.activeTableId = tableId\n\t\t\t\tthis.activeViewId = null\n\t\t\t\tthis.activeElementIsView = false\n\t\t\t}\n\t\t},\n\t\tsetActiveContextId(contextId) {\n\t\t\tif (this.activeContextId !== contextId) {\n\t\t\t\tthis.activeContextId = parseInt(contextId)\n\t\t\t}\n\t\t},\n\t\tsetTables(tables) {\n\t\t\tthis.tables = tables\n\t\t},\n\t\tsetViews(views) {\n\t\t\tthis.views = views\n\t\t},\n\t\tsetTemplates(templates) {\n\t\t\tthis.templates = templates\n\t\t},\n\t\tsetContexts(contexts) {\n\t\t\tthis.contexts = contexts\n\t\t},\n\t\tsetTable(table) {\n\t\t\tconst index = this.tables.findIndex(t => t.id === table.id)\n\t\t\tthis.tables.splice(index, 1, table)\n\t\t},\n\t\tsetView(view) {\n\t\t\tconst index = this.views.findIndex(v => v.id === view.id)\n\t\t\tthis.views[index] = view\n\t\t},\n\t\tsetContext(context) {\n\t\t\tconst index = this.contexts.findIndex(c => c.id === context.id)\n\t\t\tthis.contexts[index] = context\n\t\t},\n\t\tsetActiveRowId(rowId) {\n\t\t\tthis.activeRowId = rowId\n\t\t},\n\n\t\tasync insertNewTable({ data }) {\n\t\t\tlet res = null\n\n\t\t\ttry {\n\t\t\t\tres = (await axios.post(generateOcsUrl('/apps/tables/api/2/tables'), data)).data.ocs\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not insert table.'))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst tables = this.tables\n\t\t\ttables.push(res.data)\n\t\t\tthis.setTables(tables)\n\t\t\treturn res.data\n\t\t},\n\n\t\tasync loadTablesFromBE() {\n\t\t\tthis.setLoading({ key: 'tables', value: true })\n\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(generateUrl('/apps/tables/table'))\n\t\t\t\tthis.setTables(res.data)\n\t\t\t\tthis.views = []\n\t\t\t\tres.data.forEach(table => {\n\t\t\t\t\tif (table.views) this.views = this.views.concat(table.views)\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load tables.'))\n\t\t\t\tshowError(t('tables', 'Could not fetch tables'))\n\t\t\t}\n\n\t\t\tthis.setLoading({ key: 'tables', value: false })\n\t\t\treturn true\n\t\t},\n\n\t\tasync loadViewsSharedWithMeFromBE() {\n\t\t\tthis.setLoading({ key: 'viewsShared', value: true })\n\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(generateUrl('/apps/tables/view'))\n\t\t\t\tres.data.forEach(view => {\n\t\t\t\t\tif (this.views.filter(v => v.id === view.id).length === 0) {\n\t\t\t\t\t\tthis.views.push(view)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load shared views.'))\n\t\t\t\tshowError(t('tables', 'Could not load shared views'))\n\t\t\t}\n\n\t\t\tthis.setLoading({ key: 'viewsShared', value: false })\n\t\t\treturn true\n\t\t},\n\n\t\tasync loadTemplatesFromBE() {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(generateUrl('/apps/tables/table/templates'))\n\t\t\t\tthis.templates = res.data\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load templates.'))\n\t\t\t\tshowError(t('tables', 'Could not fetch templates'))\n\t\t\t}\n\t\t},\n\n\t\tasync insertNewView({ data }) {\n\t\t\tlet res = null\n\t\t\ttry {\n\t\t\t\tres = await axios.post(generateUrl('/apps/tables/view'), data)\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not insert view.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst views = this.views\n\t\t\tviews.push(res.data)\n\t\t\tthis.setViews(views)\n\t\t\tconst table = this.tables.find(t => t.id === res.data.tableId)\n\t\t\ttable.views.push(res.data)\n\n\t\t\treturn res.data.id\n\t\t},\n\n\t\tasync updateView({ id, data }) {\n\t\t\tlet res = null\n\n\t\t\ttry {\n\t\t\t\tres = await axios.put(generateUrl('/apps/tables/view/' + id), data)\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not update view.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst view = res.data\n\t\t\tconst views = this.views\n\t\t\tconst index = views.findIndex(v => v.id === view.id)\n\t\t\tviews[index] = view\n\t\t\tthis.setViews([...views])\n\t\t\treturn true\n\t\t},\n\n\t\tasync removeView({ viewId }) {\n\t\t\ttry {\n\t\t\t\tawait axios.delete(generateUrl('/apps/tables/view/' + viewId))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove view.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst views = this.views\n\t\t\tconst index = views.findIndex(v => v.id === viewId)\n\t\t\tviews.splice(index, 1)\n\t\t\tthis.setViews([...views])\n\t\t\treturn true\n\t\t},\n\n\t\tasync reloadViewsOfTable({ tableId }) {\n\t\t\tlet res = null\n\t\t\ttry {\n\t\t\t\tres = await axios.get(generateUrl('/apps/tables/view/table/' + tableId))\n\t\t\t\t// Set Views\n\t\t\t\tconst views = this.views\n\t\t\t\tres.data.forEach(view => {\n\t\t\t\t\tconst index = views.findIndex(v => v.id === view.id)\n\t\t\t\t\tset(this.views, index, view)\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not reload view.'))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\n\t\tasync updateTable({ id, data }) {\n\t\t\tlet res = null\n\n\t\t\ttry {\n\t\t\t\tres = (await axios.put(generateOcsUrl('/apps/tables/api/2/tables/' + id), data)).data.ocs\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not update table.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst table = res.data\n\t\t\tconst tables = this.tables\n\t\t\tconst index = tables.findIndex(t => t.id === table.id)\n\t\t\tset(this.tables, index, table)\n\t\t\treturn true\n\t\t},\n\n\t\tasync favoriteView({ id }) {\n\t\t\ttry {\n\t\t\t\tawait axios.post(generateOcsUrl(`/apps/tables/api/2/favorites/${NODE_TYPE_VIEW}/${id}`))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not mark view as favorite'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst index = this.views.findIndex(v => v.id === id)\n\t\t\tconst view = this.views[index]\n\t\t\tview.favorite = true\n\t\t\tthis.setView(view)\n\n\t\t\treturn true\n\t\t},\n\n\t\tasync removeFavoriteView({ id }) {\n\t\t\ttry {\n\t\t\t\tawait axios.delete(generateOcsUrl(`/apps/tables/api/2/favorites/${NODE_TYPE_VIEW}/${id}`))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove view from favorites'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst index = this.views.findIndex(v => v.id === id)\n\t\t\tconst view = this.views[index]\n\t\t\tview.favorite = false\n\t\t\tthis.setView(view)\n\n\t\t\treturn true\n\t\t},\n\n\t\tasync favoriteTable({ id }) {\n\t\t\ttry {\n\t\t\t\tawait axios.post(generateOcsUrl(`/apps/tables/api/2/favorites/${NODE_TYPE_TABLE}/${id}`))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not mark table as favorite'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst index = this.tables.findIndex(t => t.id === id)\n\t\t\tconst table = this.tables[index]\n\t\t\ttable.favorite = true\n\t\t\tthis.setTable(table)\n\n\t\t\treturn true\n\t\t},\n\n\t\tasync removeFavoriteTable({ id }) {\n\t\t\ttry {\n\t\t\t\tawait axios.delete(generateOcsUrl(`/apps/tables/api/2/favorites/${NODE_TYPE_TABLE}/${id}`))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove table from favorites'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst index = this.tables.findIndex(t => t.id === id)\n\t\t\tconst table = this.tables[index]\n\t\t\ttable.favorite = false\n\t\t\tthis.setTable(table)\n\n\t\t\treturn true\n\t\t},\n\n\t\tasync shareContext({ id, previousReceivers, receivers, displayMode }) {\n\t\t\tconst share = {\n\t\t\t\tnodeType: 'context',\n\t\t\t\tnodeId: id,\n\t\t\t\tdisplayMode,\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tfor (const receiver of receivers) {\n\t\t\t\t\tshare.receiverType = receiver.isUser ? 'user' : 'group'\n\t\t\t\t\tshare.receiver = receiver.id\n\t\t\t\t\t// Avoid duplicate shares by checking if share exists first\n\t\t\t\t\tconst existingShare = previousReceivers.find((p) => p.receiver === share.receiver && p.receiver_type === share.receiverType)\n\t\t\t\t\tif (!existingShare) {\n\t\t\t\t\t\tconst createdShare = await axios.post(generateUrl('/apps/tables/share'), share)\n\t\t\t\t\t\tif (createdShare?.data && createdShare?.data?.id) {\n\t\t\t\t\t\t\tconst shareId = createdShare.data.id\n\t\t\t\t\t\t\tawait this.updateDisplayMode({ shareId, displayMode, target: 'default' })\n\t\t\t\t\t\t\tif (receiver.id === getCurrentUser().uid) {\n\t\t\t\t\t\t\t\tawait this.updateDisplayMode({ shareId, displayMode, target: 'self' })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not add application share.'))\n\t\t\t}\n\t\t\ttry {\n\t\t\t\t// If there's a previous share that wasn't maintained, delete it\n\t\t\t\tfor (const previousReceiver of previousReceivers) {\n\t\t\t\t\tconst currentShare = receivers.find((r) => {\n\t\t\t\t\t\tconst receiverType = r.isUser ? 'user' : 'group'\n\t\t\t\t\t\treturn r.id === previousReceiver.receiver && receiverType === previousReceiver.receiver_type\n\t\t\t\t\t})\n\t\t\t\t\tif (!currentShare) {\n\t\t\t\t\t\tawait axios.delete(generateUrl('/apps/tables/share/' + previousReceiver.share_id))\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst shareId = previousReceiver.share_id\n\t\t\t\t\t\tawait this.updateDisplayMode({ shareId, displayMode, target: 'default' })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove application share.'))\n\t\t\t}\n\t\t},\n\n\t\tasync updateDisplayMode({ shareId, displayMode, target }) {\n\t\t\ttry {\n\t\t\t\tawait axios.put(generateUrl('/apps/tables/share/' + shareId + '/display-mode'), { displayMode, target })\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not update display mode.'))\n\t\t\t}\n\t\t},\n\n\t\tasync insertNewContext({ data, receivers, displayMode }) {\n\t\t\tthis.setLoading({ key: 'contexts', value: true })\n\t\t\tlet res = null\n\n\t\t\ttry {\n\t\t\t\tres = await axios.post(generateOcsUrl('/apps/tables/api/2/contexts'), data)\n\t\t\t\tconst id = res?.data?.ocs?.data?.id\n\t\t\t\tif (id) {\n\t\t\t\t\tawait this.shareContext({ id, previousReceivers: [], receivers, displayMode })\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not insert application.'))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst contexts = this.contexts\n\t\t\tcontexts.push(res.data.ocs.data)\n\t\t\tthis.setContexts(contexts)\n\n\t\t\tthis.setLoading({ key: 'contexts', value: false })\n\t\t\treturn res.data.ocs.data\n\t\t},\n\n\t\tasync updateContext({ id, data, previousReceivers, receivers, displayMode }) {\n\t\t\tlet res = null\n\t\t\ttry {\n\t\t\t\tres = await axios.put(generateOcsUrl('/apps/tables/api/2/contexts/' + id), data)\n\t\t\t\tawait this.shareContext({ id, previousReceivers, receivers, displayMode })\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not update application.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst context = res.data.ocs.data\n\t\t\tconst index = this.contexts.findIndex(c => c.id === context.id)\n\t\t\tset(this.contexts, index, context)\n\n\t\t\treturn true\n\t\t},\n\n\t\tasync transferTable({ id, data }) {\n\t\t\ttry {\n\t\t\t\tawait axios.put(generateOcsUrl('/apps/tables/api/2/tables/' + id + '/transfer'), data)\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not transfer table.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst tables = this.tables\n\t\t\tconst index = tables.findIndex(t => t.id === id)\n\t\t\ttables.splice(index, 1)\n\t\t\tthis.setTables([...tables])\n\t\t\treturn true\n\t\t},\n\n\t\tasync getAllContexts() {\n\t\t\tthis.setLoading({ key: 'contexts', value: true })\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(generateOcsUrl('/apps/tables/api/2/contexts'))\n\t\t\t\tthis.contexts = res.data.ocs.data\n\t\t\t\tawait this.getContextsTablesAndViews()\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load applications.'))\n\t\t\t\tshowError(t('tables', 'Could not fetch applications'))\n\t\t\t}\n\t\t\tthis.setLoading({ key: 'contexts', value: false })\n\t\t\treturn true\n\t\t},\n\n\t\tasync loadContext({ id }) {\n\t\t\ttry {\n\t\t\t\tconst res = await axios.get(generateOcsUrl('/apps/tables/api/2/contexts/' + id))\n\t\t\t\tthis.setContext(res.data.ocs.data)\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load application.'))\n\t\t\t\tshowError(t('tables', 'Could not fetch application'))\n\t\t\t}\n\t\t\treturn true\n\t\t},\n\n\t\tasync getContextsTablesAndViews() {\n\t\t\tfor (const context of this.contexts) {\n\t\t\t\tfor (const node of Object.values(context?.nodes)) {\n\t\t\t\t\tif (parseInt(node.node_type) === NODE_TYPE_TABLE) {\n\t\t\t\t\t\tawait this.loadContextTable({ id: node.node_id })\n\t\t\t\t\t} else if (parseInt(node.node_type) === NODE_TYPE_VIEW) {\n\t\t\t\t\t\tawait this.loadContextView({ id: node.node_id })\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\tasync loadContextTable({ id }) {\n\t\t\tconst table = this.tables.find(table => table.id === id)\n\t\t\tif (table) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tlet res\n\t\t\ttry {\n\t\t\t\tres = await axios.get(generateOcsUrl('/apps/tables/api/2/tables/' + id))\n\t\t\t\tconst tables = this.tables\n\t\t\t\ttables.push(res.data.ocs.data)\n\t\t\t\tthis.setTables([...tables])\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load table.'))\n\t\t\t\tshowError(t('tables', 'Could not fetch table'))\n\t\t\t}\n\t\t\treturn res?.data.ocs.data\n\t\t},\n\n\t\tasync loadContextView({ id }) {\n\t\t\tconst view = this.views.find(view => view.id === id)\n\t\t\tif (view) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t\tlet res\n\t\t\ttry {\n\t\t\t\tres = await axios.get(generateUrl('/apps/tables/view/' + id))\n\t\t\t\tconst views = this.views\n\t\t\t\tviews.push(res.data)\n\t\t\t\tthis.setViews([...views])\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not load view'))\n\t\t\t\tshowError(t('tables', 'Could not fetch view'))\n\t\t\t}\n\t\t\treturn res?.data\n\t\t},\n\n\t\tasync transferContext({ id, data }) {\n\t\t\ttry {\n\t\t\t\tawait axios.put(generateOcsUrl('/apps/tables/api/2/contexts/' + id + '/transfer'), data)\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not transfer application.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst contexts = this.contexts\n\t\t\tconst index = contexts.findIndex(c => c.id === id)\n\t\t\tcontexts.splice(index, 1)\n\t\t\tthis.setContexts([...contexts])\n\t\t\treturn true\n\t\t},\n\n\t\tasync removeContext({ context }) {\n\t\t\ttry {\n\t\t\t\tawait axios.delete(generateOcsUrl('/apps/tables/api/2/contexts/' + context.id))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove application.'))\n\t\t\t\treturn false\n\t\t\t}\n\t\t\tconst contexts = this.contexts\n\t\t\tconst index = contexts.findIndex(c => c.id === context.id)\n\t\t\tcontexts.splice(index, 1)\n\t\t\tthis.setContexts([...contexts])\n\t\t\treturn true\n\t\t},\n\n\t\tasync removeTable({ tableId }) {\n\t\t\ttry {\n\t\t\t\tawait axios.delete(generateUrl('/apps/tables/table/' + tableId))\n\t\t\t} catch (e) {\n\t\t\t\tdisplayError(e, t('tables', 'Could not remove table.'))\n\t\t\t\treturn false\n\t\t\t}\n\n\t\t\tconst tables = this.tables\n\t\t\tconst index = tables.findIndex(t => t.id === tableId)\n\t\t\ttables.splice(index, 1)\n\t\t\tthis.setTables([...tables])\n\t\t\treturn true\n\t\t},\n\n\t\tsetTableHasShares({ tableId, hasShares }) {\n\t\t\tconst table = this.tables.find(t => t.id === tableId)\n\t\t\tif (table) {\n\t\t\t\ttable.hasShares = !!hasShares\n\t\t\t}\n\t\t},\n\n\t\tsetViewHasShares({ viewId, hasShares }) {\n\t\t\tconst view = this.views.find(v => v.id === viewId)\n\t\t\tif (view) {\n\t\t\t\tview.hasShares = !!hasShares\n\t\t\t}\n\t\t},\n\n\t},\n})\n"],"names":["useTablesStore","defineStore","state","id","table","context","view","item","key","value","viewId","tableId","contextId","tables","views","templates","contexts","index","t","v","c","rowId","data","res","axios","generateOcsUrl","e","displayError","generateUrl","showError","set","NODE_TYPE_VIEW","NODE_TYPE_TABLE","previousReceivers","receivers","displayMode","share","receiver","p","createdShare","shareId","getCurrentUser","previousReceiver","r","receiverType","target","node","hasShares"],"mappings":"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"}