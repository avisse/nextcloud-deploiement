{"version":3,"file":"public-0fz1q1qH.chunk.mjs","sources":["../node_modules/@nextcloud/logger/dist/index.mjs","../node_modules/@nextcloud/initial-state/dist/index.mjs","../node_modules/@nextcloud/sharing/dist/public.mjs"],"sourcesContent":["import { getCurrentUser } from \"@nextcloud/auth\";\nvar LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n  LogLevel2[LogLevel2[\"Debug\"] = 0] = \"Debug\";\n  LogLevel2[LogLevel2[\"Info\"] = 1] = \"Info\";\n  LogLevel2[LogLevel2[\"Warn\"] = 2] = \"Warn\";\n  LogLevel2[LogLevel2[\"Error\"] = 3] = \"Error\";\n  LogLevel2[LogLevel2[\"Fatal\"] = 4] = \"Fatal\";\n  return LogLevel2;\n})(LogLevel || {});\nvar __defProp$1 = Object.defineProperty;\nvar __defNormalProp$1 = (obj, key, value) => key in obj ? __defProp$1(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField$1 = (obj, key, value) => {\n  __defNormalProp$1(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass ConsoleLogger {\n  constructor(context) {\n    __publicField$1(this, \"context\");\n    this.context = context || {};\n  }\n  formatMessage(message, level, context) {\n    let msg = \"[\" + LogLevel[level].toUpperCase() + \"] \";\n    if (context && context.app) {\n      msg += context.app + \": \";\n    }\n    if (typeof message === \"string\")\n      return msg + message;\n    msg += \"Unexpected \".concat(message.name);\n    if (message.message)\n      msg += ' \"'.concat(message.message, '\"');\n    if (level === LogLevel.Debug && message.stack)\n      msg += \"\\n\\nStack trace:\\n\".concat(message.stack);\n    return msg;\n  }\n  log(level, message, context) {\n    var _a, _b;\n    if (typeof ((_a = this.context) == null ? void 0 : _a.level) === \"number\" && level < ((_b = this.context) == null ? void 0 : _b.level)) {\n      return;\n    }\n    if (typeof message === \"object\" && (context == null ? void 0 : context.error) === void 0) {\n      context.error = message;\n    }\n    switch (level) {\n      case LogLevel.Debug:\n        console.debug(this.formatMessage(message, LogLevel.Debug, context), context);\n        break;\n      case LogLevel.Info:\n        console.info(this.formatMessage(message, LogLevel.Info, context), context);\n        break;\n      case LogLevel.Warn:\n        console.warn(this.formatMessage(message, LogLevel.Warn, context), context);\n        break;\n      case LogLevel.Error:\n        console.error(this.formatMessage(message, LogLevel.Error, context), context);\n        break;\n      case LogLevel.Fatal:\n      default:\n        console.error(this.formatMessage(message, LogLevel.Fatal, context), context);\n        break;\n    }\n  }\n  debug(message, context) {\n    this.log(LogLevel.Debug, message, Object.assign({}, this.context, context));\n  }\n  info(message, context) {\n    this.log(LogLevel.Info, message, Object.assign({}, this.context, context));\n  }\n  warn(message, context) {\n    this.log(LogLevel.Warn, message, Object.assign({}, this.context, context));\n  }\n  error(message, context) {\n    this.log(LogLevel.Error, message, Object.assign({}, this.context, context));\n  }\n  fatal(message, context) {\n    this.log(LogLevel.Fatal, message, Object.assign({}, this.context, context));\n  }\n}\nfunction buildConsoleLogger(context) {\n  return new ConsoleLogger(context);\n}\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => {\n  __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n  return value;\n};\nclass LoggerBuilder {\n  constructor(factory) {\n    __publicField(this, \"context\");\n    __publicField(this, \"factory\");\n    this.context = {};\n    this.factory = factory;\n  }\n  /**\n   * Set the app name within the logging context\n   *\n   * @param appId App name\n   */\n  setApp(appId) {\n    this.context.app = appId;\n    return this;\n  }\n  /**\n   * Set the logging level within the logging context\n   *\n   * @param level Logging level\n   */\n  setLogLevel(level) {\n    this.context.level = level;\n    return this;\n  }\n  /* eslint-disable jsdoc/no-undefined-types */\n  /**\n   * Set the user id within the logging context\n   * @param uid User ID\n   * @see {@link detectUser}\n   */\n  /* eslint-enable jsdoc/no-undefined-types */\n  setUid(uid) {\n    this.context.uid = uid;\n    return this;\n  }\n  /**\n   * Detect the currently logged in user and set the user id within the logging context\n   */\n  detectUser() {\n    const user = getCurrentUser();\n    if (user !== null) {\n      this.context.uid = user.uid;\n    }\n    return this;\n  }\n  /**\n   * Detect and use logging level configured in nextcloud config\n   */\n  detectLogLevel() {\n    const self = this;\n    const onLoaded = () => {\n      var _a, _b;\n      if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n        self.context.level = (_b = (_a = window._oc_config) == null ? void 0 : _a.loglevel) != null ? _b : LogLevel.Warn;\n        if (window._oc_debug) {\n          self.context.level = LogLevel.Debug;\n        }\n        document.removeEventListener(\"readystatechange\", onLoaded);\n      } else {\n        document.addEventListener(\"readystatechange\", onLoaded);\n      }\n    };\n    onLoaded();\n    return this;\n  }\n  /** Build a logger using the logging context and factory */\n  build() {\n    if (this.context.level === void 0) {\n      this.detectLogLevel();\n    }\n    return this.factory(this.context);\n  }\n}\nfunction getLoggerBuilder() {\n  return new LoggerBuilder(buildConsoleLogger);\n}\nfunction getLogger() {\n  return getLoggerBuilder().build();\n}\nexport {\n  LogLevel,\n  getLogger,\n  getLoggerBuilder\n};\n","function loadState(app, key, fallback) {\n  const elem = document.querySelector(`#initial-state-${app}-${key}`);\n  if (elem === null) {\n    if (fallback !== void 0) {\n      return fallback;\n    }\n    throw new Error(`Could not find initial state ${key} of ${app}`);\n  }\n  try {\n    return JSON.parse(atob(elem.value));\n  } catch (e) {\n    throw new Error(`Could not parse initial state ${key} of ${app}`);\n  }\n}\nexport {\n  loadState\n};\n","import { loadState } from \"@nextcloud/initial-state\";\nfunction isPublicShare() {\n  return loadState(\"files_sharing\", \"isPublic\", null) ?? document.querySelector(\n    'input#isPublic[type=\"hidden\"][name=\"isPublic\"][value=\"1\"]'\n  ) !== null;\n}\nfunction getSharingToken() {\n  return loadState(\"files_sharing\", \"sharingToken\", null) ?? document.querySelector('input#sharingToken[type=\"hidden\"]')?.value ?? null;\n}\nexport {\n  getSharingToken,\n  isPublicShare\n};\n"],"names":["LogLevel","LogLevel2","__defProp$1","__defNormalProp$1","obj","key","value","__publicField$1","ConsoleLogger","context","message","level","msg","_a","_b","buildConsoleLogger","__defProp","__defNormalProp","__publicField","LoggerBuilder","factory","appId","uid","user","getCurrentUser","self","onLoaded","getLoggerBuilder","loadState","app","fallback","elem","isPublicShare","getSharingToken"],"mappings":"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","x_google_ignoreList":[0,1,2]}